// -*- mode: javascript -*-
{
    "Name": "Fluid Mechanics",
    "ShortName":"Fluid",
    "Models":
    {
        "fluid":{
            "equations":"Navier-Stokes"
        }
    },
    "Parameters":
    {
        "ubar":"2",
        "chi":"t<2:t"
    },
    "Meshes":
    {
        "heatfluid":
        {
            "Import":
            {
                "filename":"$cfgdir/cfd.geo",
                "hsize":0.03 //0.01
            }
        }
    },
    "Materials":
    {
        "Fluid":{
            "rho":"1.0e3",
            "mu":"1.0",
            "k":"2.9e-5",
            "Cp":"4185"
        }
    },
    "InitialConditions":
    {
        "heat":{
            "temperature":{
                "Expression":{
                    "myic":{
                        "markers":"Fluid",
                        "expr":293.15
                    }
                }
            }
        }
    },
    "BoundaryConditions":
    {
        "fluid":
        {
            "velocity":
            {
                "inlet":
                {
                    "expr":"{ 1.5*ubar*(4./0.1681)*y*(0.41-y)*( ((1-cos(pi*t/2))/2)*chi + (1-chi) ),0}:ubar:y:t:chi"
                },
                "wall1":
                {
                    "expr":"{0,0}"
                },
                "wall2":
                {
                    "expr":"{0,0}"
                }
            },
            "outlet":
            {
                "outlet":
                {
                    "expr":"0" 
                }
            }
        },
        "heat":
        {
            "temperature":
            {
                "inlet":
                {
                    //"expr":"300*(y>0.15)*(y<0.25)+(293.15*(y<(0.15-1e-9)))+(293.15*(y>(0.25-1e-9))):y"
                    "expr":"( 293.15-10*(y-0.15)*(y-0.25)/(0.2^2) )*(y>0.15)*(y<0.25)+(293.15*(y<(0.15-1e-9)))+(293.15*(y>(0.25-1e-9))):y"
                    //"expr":"293.15"
                }
            }
        }
    },
    "PostProcess":
    {
        "heatfluid":
        {
            "Exports":
            {
                "fields":["fluid.velocity","fluid.pressure","heat.temperature","pid"]
            }
        },
        "fluid":
        {
            "Measures":
            {
                "Forces":"wall2",
                "Points":
                {
                    "pointA":
                    {
                        "coord":"{0.6,0.2,0}",
                        "fields":"pressure"
                    },
                    "pointB":
                    {
                        "coord":"{0.15,0.2,0}",
                        "fields":"pressure"
                    }
                }
            }
        },
        "heat":
        {
        }
    }

}

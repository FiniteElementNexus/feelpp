// -*- mode: javascript -*-
{
    "Name": "moving boundary",
    "ShortName":"moving_boundary",
    "Models":
    {
        "fluid":{
            "equations":"Navier-Stokes"
        }
    },
    "Parameters":
    {
        "ubar":"0.02"
    },
    "Meshes":
    {
        "fluid":
        {
            "Import":
            {
                "filename":"$cfgdir/cfd.geo",
                "hsize":0.03
            },
            "MeshMotion":
            {
                "ComputationalDomain":
                {
                    "markers":"Fluid",
                    "method":"harmonic_extension"
                },
                "Displacement":
                {
                    "Imposed":{
                        "wall_bottom": { "expr":"{0,ubar*x*(5-x)*sin(2*pi*t)}:x:t:ubar" },
                        "wall_top": { "expr":"{0,-ubar*x*(5-x)*sin(2*pi*t)}:x:t:ubar" }
                    },
                    "Zero":["wall_others","wall_left","outlet1","outlet2"]
                    //"Free":["titi"]
                }
            }
        }
    },
    "Materials":
    {
        "Fluid":{
            "rho":10,//"1.0e3",
            "mu":"1.0"
        }
    },
    "BoundaryConditions":
    {
        "fluid":
        {
            "velocity":
            {
                "apply_no_slip":
                {
                    "markers":["wall_others"/*,"wall_left"*/],
                    //"markers":["wall_others","wall_left"],
                    "expr":"{0,0}"
                }
            },
            "outlet":
            {
                "apply_outlets":
                {
                    //"markers":["outlet1","outlet2"],
                    "markers":["outlet1"/*,"outlet2"*/],
                    "expr":"0" 
                }
            },
            //"mesh_velocity":["wall_bottom","wall_top"]
            "mesh_velocity":{
                "markers":["wall_bottom","wall_top"]
            },
            "inlet":
            {
                "outlet2":
                {
                    "shape":"parabolic",
                    "constraint":"velocity_max",
                    "expr":"7*abs(sin(pi*t/0.15)):t"
                }
            },
            "pressure":
            {
                "wall_left":{
                    "expr":10
                }
            }
        }
    },
    "PostProcess":
    {
        "fluid":
        {
            "Exports":
            {
                "fields":["velocity","pressure","mesh-displacement","pid"]
                 ,"expr":{
                     "disp":"{meshes_fluid_meshmotion_s_0,meshes_fluid_meshmotion_s_1}:meshes_fluid_meshmotion_s_0:meshes_fluid_meshmotion_s_1"
                 }
            }
        }
    }

}

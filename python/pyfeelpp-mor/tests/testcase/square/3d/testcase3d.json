// -*- mode: javascript -*-
{
    "Name": "Test case 3D",
    "ShortName": "testcase3d",
    "Models":
    {
        "heat":[
            {
                "name":"heat",
                "materials":["Omega_1","Omega_2"],
                "setup": {
                    "heat-sources":
                    {
                        "type":"heat-source",
                        "expr":"P:P"
                    }
                }
            }
        ]
    },
	"CRBParameters":
    {
		"k_2":
		{
			"min": "1",
			"max": "20"
		}
	},
	"Parameters":
    {
        "phi":"1",
		"Tdir":"25",
        "P":"2",
        "k_1":"10",
		"k_2":"10"
    },
	"Meshes":
    {
        "heat":
        {
            "Import":
            {
                "filename":"$cfgdir/2cubes.geo",
                "hsize": 0.05
            },
            "DistanceToRange":
            {
                "boundary":{
                    "markers":["Gamma_1","Gamma_2","Gamma_int","Gamma_dir","Gamma_neu"]
                },
                "Gamma_1":{
                    "markers":["Gamma_1"]
                },
                "Gamma_2":{
                    "markers":["Gamma_2"]
                },
                "Gamma_dir":{
                    "markers":["Gamma_dir"]
                },
                "Gamma_neu":{
                    "markers":["Gamma_neu"]
                },
                "Gamma_int":{
                    "markers":["Gamma_int"]
                }
            }
        }
    },
	"Materials":
	{
		"Omega_1":
		{
			"k":"k_1:k_1",
			"Cp":"1.4e6",
			"rho":"1"
		},
		"Omega_2":
		{
			"k":"k_2:k_2",
			"Cp":"1.4e6",
			"rho":"1"
		}
	},
	"BoundaryConditions": 
	{
        "heat": 
		{
			"temperature":
			{
				"Gamma_dir": {
					"expr": "k_1:k_1"
				}
			},
            "flux": 
			{
				"Gamma_1": {
                    "expr": "0"
                },
                "Gamma_2": {
                    "expr": "0"
                },
                "Gamma_neu": {
                    "expr": "2*k_2*k_2:k_2"
                }
            }
        }
    },
	"CRBOutputs":
	{
		"PointO":
		{
			"type":"point",
			"coord": [0,0,0]
		},
		"T_Omega1_C":
		{
			"type":"mean",
			"markers": ["Omega_1"],
            "expr": "crb_u-273.15:crb_u",
            "topodim": 3
		},
		"T_Omega2_C":
		{
			"type":"mean",
			"markers": ["Omega_2"],
            "expr": "crb_u-273.15:crb_u",
            "topodim": 3
		},
		"T_int_C":
		{
			"type":"mean",
			"markers": ["Gamma_int"],
            "expr": "crb_u-273.15:crb_u",
            "topodim": 2
		}
	},
	"PostProcess":
    {
        "heat":{
			"Exports":
			{
				"fields":["temperature","pid"],
				"expr": {
						"T_C": "heat_T-273.15:heat_T",
						"flux":
						{
							"expr":"{-materials_k * heat_grad_T_0,-materials_k * heat_grad_T_1,-materials_k * heat_grad_T_2}:materials_k:heat_grad_T_0:heat_grad_T_1:heat_grad_T_2",
							"representation":["element","nodal"]
						}
					}
			}
		}
    }
}